{% extends "base.html" %}
{% load static %}

{% block extra_css %}
<link href="{% static 'products/css/products.css' %}" type="text/css" rel="stylesheet" media="screen,projection" />
{% endblock %}

{% block extra_js %}
<script src="{% static 'products/js/products.js' %}"></script>
{% endblock %}

{% block content %}
<main class="section no-pad-bot" id="index-banner">
    <div class="container">
        <div class="row center-align">
            <div class="col center-align">
                {% if selected_category == 'new' %}
                <span class="card-title-new">RUN WITH NATURE</span>
                <p class="new-info">INSPIRED BY NATURE AND RUNNING OUTDOORS, HEAVYWEIGHT AND LONG LASTING FABRICS MADE
                    FOR LONGEVITY AND DISTANCE.</p>
                {% endif %}
            </div>
        </div>
    </div>
    <div class="container">
        <div class="row">
            <div class="col">
                {% if search_term or categories or current_sorting != 'None_None' %}
                <span class="small"><a class="all-products" href="{% url 'products' %}">All Products</a> |
                    Total: {{ products|length }}</span>
                {% endif %}
            </div>
        </div>
    </div>
    <div class="container">
        <div class="row">
            <div class="col right">
                <ul>
                    <li class="sort-dropdown-trigger black-text" data-target="dropdown-filter">SORT
                        <i class="fa-solid fa-chevron-down" style="color: #000000;"></i>
                    </li>
                    <ul id="dropdown-filter" class="dropdown-content">
                        <li>
                            <a
                                href="?sort=price&direction=desc{% if request.GET.q %}&q={{ request.GET.q }}{% endif %}{% if selected_category %}&category={{ selected_category }}{% endif %}">
                                Price, High to Low
                            </a>
                        </li>
                        <li>
                            <a
                                href="?sort=price&direction=asc{% if request.GET.q %}&q={{ request.GET.q }}{% endif %}{% if selected_category %}&category={{ selected_category }}{% endif %}">
                                Price, Low to High
                            </a>
                        </li>
                        <li>
                            <a
                                href="?sort=name&direction=asc{% if request.GET.q %}&q={{ request.GET.q }}{% endif %}{% if selected_category %}&category={{ selected_category }}{% endif %}">
                                Alphabetically, A-Z
                            </a>
                        </li>
                        <li>
                            <a
                                href="?sort=name&direction=desc{% if request.GET.q %}&q={{ request.GET.q }}{% endif %}{% if selected_category %}&category={{ selected_category }}{% endif %}">
                                Alphabetically, Z-A
                            </a>
                        </li>
                    </ul>
                </ul>
            </div>
        </div>
    </div>
    <div class="container">
        <div class="row">
            {% for product in products %}
            <div class="col s12 m6 l4">
                <div class="card no-shadow">
                    <div class="card-image">
                        <div class="img-container">
                            <a href="{% url 'product_detail' product.id %}">
                                <img src="{% if product.image %}{{ product.image.url }}{% else %}{% get_media_prefix %}no-image.png{% endif %}"
                                    alt="{{ product.name }}" class="zoom-image">
                            </a>
                        </div>
                    </div>
                    <div class="card-content">
                        <span class="card-title">{{ product.name }}</span>
                        <span class="color-title">{{ product.color }}</span>
                    </div>
                    <div class="card-action">
                        <span class="price">Â£{{ product.price }}</span>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
    <!-- Back to Top Button using Materialize CSS -->
    <div id="back-to-top-container">
        <a id="back-to-top" class="btn-floating btn-large waves-effect">
            <i class="material-icons">keyboard_arrow_up</i>
        </a>
    </div>


</main>
{% endblock %}